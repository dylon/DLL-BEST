(function(g){function c(){}Function.prototype.inherits=function(d){var a=new d;if(a.__proto__===undefined)a.__proto__=a;a.__super__=d;this.prototype=a;this.prototype.constructor=this;return this};Function.prototype.extend=function(){var d,a,b,e,f,h;d=this.prototype;a=arguments;h=a.length;for(f=0;f<h;++f)if(b=a[f])for(e in b)if(b.hasOwnProperty(e))d[e]=b[e];return this};c.inherits(Object);g.DllBest={Base:c}})(window);(function(g){(g.DllBest||(g.DllBest={})).Node=function(c){this.value=c}.inherits(DllBest.Base).extend({lChild:null,rChild:null,height:0,lt:null,gt:null,eq:null,assign:function(c,d){this.lChild=c.lChild;this.rChild=c.rChild;this.height=c.height;if(d){this.value=c.value;this.eq=c.eq}this.lt=c.lt;this.gt=c.gt;if(this.lt)this.lt.gt=this;if(this.gt)this.gt.lt=this},toString:function(){return"("+this.value+")"}})})(window);(function(g){(g.DllBest||(g.DllBest={})).Tree=function(c,d){this.N=c;this.compare=d}.inherits(DllBest.Base).extend({compare:null,height:function(){if(this.root)return this.root.height;return 0},biggest:function(){if(this.root)return this.findBiggest(this.root);return null},smallest:function(){if(this.root)return this.findSmallest(this.root);return null},N:null,root:null,elements:0,tryInsert:function(c){if(!this.root){this.root=new this.N(c);return true}if(!this.find(c)){this.addAsChild(this.root,
new this.N(c));this.elements+=1;return true}return false},append:function(c){c=new this.N(c);if(this.root){this.addAsChild(this.root,c);this.elements+=1}else this.root=c},findBiggest:function(c){for(;c.rChild;)c=c.rChild;return c},findSmallest:function(c){for(;c.lChild;)c=c.lChild;return c},preorder:function c(d,a){if(!d)d=this.root;a||(a=[]);if(!d)return a;a.push(d.value);for(var b=d;b=b.eq;)a.push(b.value);d.lChild&&c(d.lChild,a);d.rChild&&c(d.rChild,a);return a},inorder:function c(d,a){if(!d)d=
this.root;a||(a=[]);if(!d)return a;d.lChild&&c(d.lChild,a);a.push(d.value);for(var b=d;b=b.eq;)a.push(b.value);d.rChild&&c(d.rChild,a);return a},postorder:function c(d,a){if(!d)d=this.root;a||(a=[]);if(!d)return a;d.lChild&&c(d.lChild,a);d.rChild&&c(d.rChild,a);a.push(d.value);for(var b=d;b=b.eq;)a.push(b.value);return a},find:function(c){return this.findInSubtree(this.root,c)},findInSubtree:function c(d,a){if(!d)return null;var b=this.compare(a,d.value);if(b<0)return c(d.lChild,a);if(b>0)return c(d.rChild,
a);return d},remove:function(c){if(c=this.find(c)){this.removeNode(c);return true}return false},getRange:function(c,d){for(var a=[],b=this.root,e;b;){e=this.compare(b.value,c);if(e<0)b=b.rChild;else if(e>0&&b.lChild)b=b.lChild;else break}for(;b&&this.compare(b.value,d)<=0;){a.push(b.value);for(e=b;e=e.eq;)a.push(e.value);b=b.gt}return a},dlldump:function(){for(var c=this.smallest(),d=[],a;c;){d.push(c.value);for(a=c;a=a.eq;)d.push(a.value);c=c.gt}return d},dequeue:function(){var c=this.biggest();
if(c){this.removeNode(c);return c.value}return null}})})(window);(function(g){g=g.DllBest;(g.Avl||(g.Avl={})).Node=function(c){this.__super__(c)}.inherits(g.Node).extend({parent:null,isLeaf:function(){return this.height===0},isBranch:function(){var c=!!this.lChild,d=!!this.rChild;return c&&!d||!c&&d},maxChildHeight:function(){var c=this.lChild?this.lChild.height:-1,d=this.rChild?this.rChild.height:-1;return c>d?c:d},balance:function(){return(this.lChild?this.lChild.height:-1)-(this.rChild?this.rChild.height:-1)},isBalanced:function(){var c=this.balance();return c>=
-1&&c<=1},assign:function(c,d){this.__proto__.assign(c,d);this.parent=c.parent;if(this.lChild)this.lChild.parent=this;if(this.rChild)this.rChild.parent=this},toString:function(){return this.value+"("+this.height+")"}})})(window);(function(g){g=g.DllBest;var c=g.Avl||(g.Avl={}),d=c.Node;c.Tree=function(a){this.__super__(d,a)}.inherits(g.Tree).extend({RRC:function(a,b,e,f){b=a.rChild;a.rChild=b.lChild;if(a.rChild)a.rChild.parent=a;b.lChild=a;a.parent=b;if(f){if(f.rChild===a)f.rChild=b;else f.lChild=b;b.parent=f}else{this.root=b;this.root.parent=null}this.recomputeHeights(a);this.recomputeHeights(b.parent)},RLC:function(a,b,e,f){b=a.rChild;e=b.lChild;b.lChild=e.rChild;if(b.lChild)b.lChild.parent=b;a.rChild=e.lChild;if(a.rChild)a.rChild.parent=
a;e.rChild=b;b.parent=e;e.lChild=a;a.parent=e;if(f){if(f.rChild===a)f.rChild=e;else f.lChild=e;e.parent=f}else{this.root=e;this.root.parent=null}this.recomputeHeights(a);this.recomputeHeights(b)},LLC:function(a,b,e,f){b=a.lChild;a.lChild=b.rChild;if(a.lChild)a.lChild.parent=a;b.rChild=a;a.parent=b;if(f){if(f.rChild===a)f.rChild=b;else f.lChild=b;b.parent=f}else{this.root=b;this.root.parent=null}this.recomputeHeights(a);this.recomputeHeights(b.parent)},LRC:function(a,b,e,f){b=a.lChild;e=b.rChild;a.lChild=
e.rChild;if(a.lChild)a.lChild.parent=a;b.rChild=e.lChild;if(b.rChild)b.rChild.parent=b;e.lChild=b;b.parent=e;e.rChild=a;a.parent=e;if(f){if(f.rChild===a)f.rChild=e;else f.lChild=e;e.parent=f}else{this.root=e;this.root.parent=null}this.recomputeHeights(a);this.recomputeHeights(b)},rebalance:function(a){var b=a.balance(),e=a.parent;if(b<=-2)a.rChild.balance()<=0?this.RRC(a,void 0,void 0,e):this.RLC(a,void 0,void 0,e);else if(b>=2)a.lChild.balance()>=0?this.LLC(a,void 0,void 0,e):this.LRC(a,void 0,void 0,
e)},recomputeHeights:function(a){for(var b=true;a&&b;){b=a.height;a.height=a.rChild||a.lChild?a.maxChildHeight()+1:0;b=a.height!==b;a=a.parent}},addAsChild:function(a,b){var e=null,f;f=this.compare(b.value,a.value);if(f<0)e=this.addLeftChild(a,b);else if(f>0)e=this.addRightChild(a,b);else this.addEqualChild(a,b);e&&this.rebalance(e)},addLeftChild:function(a,b){b.gt=a;var e=null,f;if(a.lChild)this.addAsChild(a.lChild,b);else{a.lChild=b;b.parent=a;if(a.lt)a.lt.gt=b;a.lt=b;if(a.height===0)for(f=a;f;){f.height=
f.maxChildHeight()+1;if(!f.isBalanced()){e=f;break}f=f.parent}}return e},addRightChild:function(a,b){b.lt=a;var e=null,f;if(a.rChild)this.addAsChild(a.rChild,b);else{a.rChild=b;b.parent=a;if(a.gt)a.gt.lt=b;a.gt=b;if(a.height===0)for(f=a;f;){f.height=f.maxChildHeight()+1;if(!f.isBalanced()){e=f;break}f=f.parent}}return e},addEqualChild:function(a,b){b.eq=a.eq;a.eq=b;b.lt=null;b.gt=null},removeNode:function(a){this.elements-=1;if(a.eq)a.eq.assign(a);else{if(a.lt)a.lt.gt=a.gt;if(a.gt)a.gt.lt=a.lt;if(a.isLeaf())this.removeLeaf(a);
else a.isBranch()?this.removeBranch(a):this.swapAndRemove(a)}},removeLeaf:function(a){var b=a.parent;if(b){if(b.lChild===a)b.lChild=null;else b.rChild=null;this.recomputeHeights(b)}else this.root=null;for(a=b;a;){a.isBalanced()||this.rebalance(a);a=a.parent}},removeBranch:function(a){var b=a.parent;if(b){if(b.lChild)b.lChild=a.rChild||a.lChild;else b.rChild=a.rChild||a.lChild;if(a.lChild)a.lChild.parent=b;else a.rChild.parent=b;this.recomputeHeights(b)}for(a=b;a;){a.isBalanced()||this.rebalance(a);
a=a.parent}},swapAndRemove:function(a){var b=this.findSmallest(a.rChild);this.swapNodes(a,b);a.height===0?this.removeLeaf(a):this.removeBranch(a)},swapNodes:function(a,b){var e=a.parent,f=a.lChild,h=a.rChild,i=b.parent,l=b.lChild,j=b.rChild,k;k=a.height;a.height=b.height;b.height=k;if(e){if(e.lChild===a)e.lChild=b;else e.rChild=b;b.parent=e}else{this.root=b;b.parent=null}b.lChild=f;f.parent=b;a.lChild=l;if(a.rChild=j)j.parent=a;else if(i!==a){b.rChild=h;h.parent=b;i.lChild=a;a.parent=i}else{b.rChild=
a;a.parent=b}}})})(window);
